<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="0;url=pollapp://"> <!-- Delayed redirection for 2 seconds -->
    <script>
        // Function to update meta tags based on query parameters
        function updateMetaTagsFromURL() {
            var url = new URL(window.location.href);
            var imageURL = url.searchParams.get('imageURL');
            var title = url.searchParams.get('title');
            var description = url.searchParams.get('description');

            // Log the values to the console
            console.log("Image URL:", imageURL);
            console.log("Title:", title);
            console.log("Description:", description);


            if (imageURL && title && description) {
                document.querySelector('meta[property="og:title"]').setAttribute('content', title);
                document.querySelector('meta[property="og:description"]').setAttribute('content', description);
            }
        }

        // Function to check if the app is installed
        function checkAppInstalled() {
            var now = new Date().getTime();
            setTimeout(function() {
                if (new Date().getTime() - now < 100) {
                    // If the page is still focused, the app is not installed
                    redirectToAppStore();
                }
            }, 50);
        }

        // Function to redirect to the app store
        function redirectToAppStore() {
            window.location.href = "itms-apps://apps.apple.com/"; // Replace with your actual app store URL
        }

        // Check if the app is installed when the page loads
        window.onload = function() {
            updateMetaTagsFromURL();
            checkAppInstalled();
        }
    </script>
    <title>Poll</title>
</head>
<body>
    <p>If you are not redirected, <a href="pollapp://">click here</a>.</p>
</body>
</html>
